(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{2068:(e,t,n)=>{Promise.resolve().then(n.bind(n,4269))},4269:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n(5155),r=n(2115),o=n(6766),a=n(3264),l=n(7431);function s(){let[e,t]=(0,r.useState)(null),[n,s]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),[p,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[f,g]=(0,r.useState)(1200),x=(0,r.useRef)(null),w=(0,r.useRef)(null),y=(0,r.useRef)(null),v=(0,r.useRef)(null);(0,r.useEffect)(()=>()=>b(),[]),(0,r.useEffect)(()=>{let e=()=>g(window.innerWidth);return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{var e;null==(e=navigator.xr)||e.isSessionSupported("immersive-ar").then(e=>u(e)).catch(()=>u(!1))},[]);let b=(0,r.useCallback)(()=>{var e;y.current&&(y.current.end(),y.current=null),null!==v.current&&(cancelAnimationFrame(v.current),v.current=null),(null==(e=w.current)?void 0:e.parentElement)&&(w.current.parentElement.removeChild(w.current),w.current=null),h(!1)},[]);async function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;return new Promise((n,i)=>{let r=new window.Image;r.crossOrigin="anonymous",r.onload=()=>{let e=Math.min(t/r.naturalWidth,t/r.naturalHeight,1),i=Math.floor(r.naturalWidth*e),o=Math.floor(r.naturalHeight*e),l=document.createElement("canvas");l.width=i,l.height=o,l.getContext("2d").drawImage(r,0,0,i,o);let s=new a.gPd(l);s.flipY=!1,s.colorSpace=a.er$,s.needsUpdate=!0,s.generateMipmaps=!0,s.minFilter=a.$_I,n(s)},r.onerror=i,r.src=e})}async function E(e,t){if(!p)return;b(),(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop());let n=await navigator.xr.requestSession("immersive-ar",{optionalFeatures:["dom-overlay"],domOverlay:{root:x.current}});y.current=n,h(!0),n.addEventListener("end",b);let i=document.createElement("canvas");Object.assign(i.style,{position:"fixed",top:0,left:0,width:"100%",height:"100%",touchAction:"none",cursor:"grab"}),document.body.appendChild(i),w.current=i;let r=i.getContext("webgl2",{xrCompatible:!0,alpha:!0});await r.makeXRCompatible(),n.updateRenderState({baseLayer:new XRWebGLLayer(n,r)});let o=new l.JeP({canvas:i,context:r,alpha:!0});o.setSize(window.innerWidth,window.innerHeight),o.xr.enabled=!0,o.xr.setReferenceSpaceType("local"),o.xr.setSession(n);let s=new a.Z58;s.add(new a.dth(0xffffff,4473924,1));let d=new a.ZyN(0xffffff,1.2);d.position.set(0,5,0),s.add(d);let c=new a.ubm(70,window.innerWidth/window.innerHeight,.01,20),u=await n.requestReferenceSpace("local"),m=x.current,f=document.createElement("div");Object.assign(f.style,{position:"absolute",bottom:"50%",right:"20px",transform:"translateY(50%)",width:"40px",height:"240px",padding:"8px",background:"rgba(0,0,0,0.6)",color:"white",fontFamily:"sans-serif",borderRadius:"6px",display:"flex",flexDirection:"column",alignItems:"center",pointerEvents:"auto",zIndex:"10"}),m.append(f);let g=document.createElement("div");g.innerText="Depth (in): 3.00",g.style.fontSize="12px",g.style.marginBottom="8px",f.append(g);let v=document.createElement("input");v.type="range",v.min="-2",v.max="2",v.step="0.01",v.value="0",Object.assign(v.style,{width:"200px",height:"6px",transform:"rotate(-90deg)",transformOrigin:"center",appearance:"none",background:"#888",cursor:"pointer"}),f.append(v),["pointerdown","pointermove","pointerup","touchstart","touchmove","touchend","wheel"].forEach(e=>f.addEventListener(e,e=>e.stopPropagation()));let E=.01*t.widthCm,C=.01*t.heightCm,k=await j(e.src,256),S=k.image,F=S.width/S.height,z=E,P=C;F>E/C?P=E/F:z=C*F;let R=new a.YJl;R.visible=!1,s.add(R);let L=new a.V9B({map:k,side:a.$EB,depthWrite:!0}),q=new a.eaF(new a.bdM(z,P),L);R.add(q),j(e.src,Math.max(2048,1e3*z,1e3*P)).then(e=>{L.map=e,L.needsUpdate=!0}).catch(e=>console.warn("hi-res load failed:",e));let A=null,M=!1,T=new a.tBo,B=new a.I9Y,I=new a.Pq0,W={current:null},O=new a.Pq0,_=new a.Pq0;function D(e){let t=i.getBoundingClientRect();B.x=(e.clientX-t.left)/t.width*2-1,B.y=-(2*((e.clientY-t.top)/t.height))+1}v.addEventListener("input",()=>{let e=parseFloat(v.value);g.innerText="Depth (in): ".concat((3+e).toFixed(2)),A&&A.position.copy(O.clone().add(_.clone().multiplyScalar(.0254*e)))}),n.addEventListener("select",()=>{M||(A&&(s.remove(A),A=null,R.visible=!1),function(){let e=W.current;if(!e)return;let t=e.views[0],n=new a.kn4().fromArray(t.transform.matrix),i=new a.Pq0,r=new a.PTz;n.decompose(i,r,new a.Pq0);let o=new a.Pq0(0,0,-1).applyQuaternion(r).setY(0).normalize();_.copy(o);let l=i.clone().add(o.multiplyScalar(3*.0254));O.copy(l);let d=new a.kn4().lookAt(l,i,new a.Pq0(0,1,0)),c=new a.PTz().setFromRotationMatrix(d),p=new a.PTz().setFromAxisAngle(new a.Pq0(0,0,1),Math.PI);c.multiply(p);let u=4/3*z,m=4/3*P,h=new a.bdM(u,m),f=new a.V9B({color:0xdddddd,side:a.$EB});(A=new a.eaF(h,f)).position.copy(l),A.quaternion.copy(c),R.position.set(0,0,0),R.quaternion.identity(),A.add(R),R.visible=!0,s.add(A),q.position.z=-.001,v.value="0",g.innerText="Depth (in): 3.00"}())}),i.addEventListener("pointerdown",e=>{D(e),T.setFromCamera(B,c);let t=A&&T.intersectObject(q,!0)[0];t&&(M=!0,i.style.cursor="grabbing",I.copy(t.point).sub(R.getWorldPosition(new a.Pq0)))}),i.addEventListener("pointermove",e=>{if(!M||!A)return;D(e),T.setFromCamera(B,c);let t=T.intersectObject(A,!0)[0];if(!t)return;let n=A.worldToLocal(t.point.clone()).sub(I),i=(4/3*z-z)/2,r=(4/3*P-P)/2;n.x=a.cj9.clamp(n.x,-i,i),n.y=a.cj9.clamp(n.y,-r,r),R.position.copy(n)}),i.addEventListener("pointerup",()=>{M=!1,i.style.cursor="grab"}),n.requestAnimationFrame(function e(t,i){n.requestAnimationFrame(e);let a=n.renderState.baseLayer;r.bindFramebuffer(r.FRAMEBUFFER,a.framebuffer),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);let l=i.getViewerPose(u);if(!l)return;W.current=l;let d=l.views[0],p=a.getViewport(d);o.setViewport(p.x,p.y,p.width,p.height),c.matrix.fromArray(d.transform.matrix),c.matrix.decompose(c.position,c.quaternion,c.scale),c.projectionMatrix.fromArray(d.projectionMatrix),c.updateMatrixWorld(!0),o.render(s,c)}),n.addEventListener("end",()=>{i.remove()})}function C(){t(null),b()}return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto",padding:"2rem"},children:[(0,i.jsx)("h1",{style:{textAlign:"center",fontWeight:300},children:"Print Collection"}),(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(300px,1fr))",gap:"2rem"},children:[{id:1,title:"Mountain Sunset",src:"/my-lovely-app/images/source.jpg",description:"35mm film scan of mountain landscape at sunset. Captured on Kodak Portra 400 with a Nikon F3.",sizes:[{size:'8\xd710"',price:45,widthCm:25.4,heightCm:20.32},{size:'11\xd714"',price:75,widthCm:35.56,heightCm:27.94},{size:'16\xd720"',price:120,widthCm:50.8,heightCm:40.64}],tags:["landscape","35mm","color"]}].map(e=>(0,i.jsxs)("div",{onClick:()=>{t(e),s(!1),c(null)},style:{cursor:"pointer",overflow:"hidden",borderRadius:8,boxShadow:"0 4px 8px rgba(0,0,0,0.1)",background:"white"},children:[(0,i.jsx)("div",{style:{position:"relative",height:240},children:(0,i.jsx)(o.default,{src:e.src,alt:e.title,fill:!0,style:{objectFit:"cover"}})}),(0,i.jsxs)("div",{style:{padding:"1rem",borderTop:"1px solid #eee"},children:[(0,i.jsx)("h3",{style:{margin:0},children:e.title}),(0,i.jsx)("div",{style:{display:"flex",gap:4,flexWrap:"wrap"},children:e.tags.map(e=>(0,i.jsx)("span",{style:{background:"#f0f0f0",padding:"0.2rem 0.5rem",borderRadius:12,fontSize:12,color:"#666"},children:e},e))})]})]},e.id))}),e&&(0,i.jsx)("div",{onClick:C,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,i.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:8,display:f>768?"flex":"block",width:"90%",maxWidth:1200,maxHeight:"90vh",overflow:"hidden"},children:[(0,i.jsx)("button",{onClick:C,style:{position:"absolute",top:10,right:20,fontSize:24,background:"transparent",border:"none",cursor:"pointer",zIndex:1},children:"\xd7"}),(0,i.jsx)("div",{style:{flex:3,position:"relative",background:"#f5f5f5",height:f>768?"80vh":240},children:(0,i.jsx)(o.default,{src:e.src,alt:e.title,fill:!0,style:{objectFit:"contain"}})}),(0,i.jsxs)("div",{style:{flex:1,padding:"2rem",overflowY:"auto",borderLeft:f>768?"1px solid #eee":"none"},children:[(0,i.jsx)("h2",{style:{marginTop:0},children:e.title}),(0,i.jsx)("button",{onClick:function(){s(e=>!e)},style:{marginBottom:"1rem"},children:n?"Hide Details":"Show Details"}),n&&(0,i.jsx)("p",{children:e.description}),(0,i.jsx)("h3",{children:"Available Sizes"}),(0,i.jsx)("ul",{style:{listStyle:"none",padding:0},children:e.sizes.map(t=>(0,i.jsxs)("li",{style:{marginBottom:"1rem"},children:[(0,i.jsxs)("label",{style:{cursor:"pointer"},children:[(0,i.jsx)("input",{type:"radio",name:"size",checked:d===t,onChange:()=>{c(t)}})," ",t.size," â€” $",t.price]}),p&&(0,i.jsx)("button",{onClick:()=>E(e,t),disabled:m,style:{marginLeft:8},children:m?"AR Active":"View in Your Space"})]},t.size))})]})]})}),(0,i.jsx)("div",{ref:x,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1100}})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[367,212,766,441,684,358],()=>t(2068)),_N_E=e.O()}]);