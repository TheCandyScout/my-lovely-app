(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{2068:(e,t,i)=>{Promise.resolve().then(i.bind(i,4269))},4269:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i(5155),r=i(2115),o=i(6766),a=i(7431),l=i(3264);function s(){let[e,t]=(0,r.useState)(null),[i,s]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),[u,p]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[f,w]=(0,r.useState)(1200),x=(0,r.useRef)(null),g=(0,r.useRef)(null),b=(0,r.useRef)(null),y=(0,r.useRef)(null);(0,r.useEffect)(()=>()=>v(),[]),(0,r.useEffect)(()=>{let e=()=>w(window.innerWidth);return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{var e;null==(e=navigator.xr)||e.isSessionSupported("immersive-ar").then(e=>p(e)).catch(()=>p(!1))},[]);let v=(0,r.useCallback)(()=>{var e;b.current&&(b.current.end(),b.current=null),null!==y.current&&(cancelAnimationFrame(y.current),y.current=null),(null==(e=g.current)?void 0:e.parentElement)&&(g.current.parentElement.removeChild(g.current),g.current=null),h(!1)},[]);async function j(e,t){let i;if(!u)return;v(),(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop());let n=await navigator.xr.requestSession("immersive-ar",{optionalFeatures:["dom-overlay"],domOverlay:{root:x.current}});b.current=n,h(!0),n.addEventListener("end",v);let r=document.createElement("canvas");Object.assign(r.style,{position:"fixed",top:0,left:0,width:"100%",height:"100%",touchAction:"none",cursor:"grab"}),document.body.appendChild(r),g.current=r;let o=r.getContext("webgl2",{xrCompatible:!0,alpha:!0});await o.makeXRCompatible();let s=new XRWebGLLayer(n,o);n.updateRenderState({baseLayer:s});let d=new a.JeP({canvas:r,context:o,alpha:!0});d.setSize(window.innerWidth,window.innerHeight),d.xr.enabled=!0,d.xr.setReferenceSpaceType("local"),d.xr.setSession(n);let c=new l.Z58;c.add(new l.dth(0xffffff,4473924,1));let p=new l.ZyN(0xffffff,1.2);p.position.set(0,5,0),c.add(p);let m=new l.ubm(70,window.innerWidth/window.innerHeight,.01,20),f=await n.requestReferenceSpace("local"),w=.01*t.widthCm,j=.01*t.heightCm,C=await new Promise((t,i)=>new l.Tap().setCrossOrigin("anonymous").load(e.src,e=>{e.flipY=!1,e.colorSpace=l.er$,t(e)},void 0,i)),k=C.image,E=k.naturalWidth/k.naturalHeight,S=w,F=j;E>w/j?F=w/E:S=j*E;let z=new l.YJl;z.visible=!1,c.add(z);let R=new l.V9B({map:C,side:l.$EB}),L=new l.eaF(new l.bdM(S,F),R);z.add(L);let P=[],W=0,B=0,q=document.createElement("button");q.textContent="Add Wall Point",Object.assign(q.style,{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",padding:"8px 16px",background:"white",pointerEvents:"auto"}),q.onclick=()=>{let e=m.position.clone(),t=new l.Pq0(0,0,-1).applyQuaternion(m.quaternion),n=e.add(t.multiplyScalar(2));if(P.push(n),2===P.length){let[e,t]=P;W=Math.max(e.distanceTo(t),S),B=Math.max(F,F);let n=new l.bdM(W,B),r=new l.V9B({color:8947848,side:l.$EB,wireframe:!0});i=new l.eaF(n,r);let o=e.clone().add(t).multiplyScalar(.5);i.position.copy(o);let a=t.clone().sub(e).normalize(),s=new l.Pq0(0,1,0),d=new l.Pq0().crossVectors(a,s).normalize(),u=new l.kn4().makeBasis(a,s,d);i.setRotationFromMatrix(u),c.add(i),z.position.set(0,0,0),z.quaternion.identity(),i.add(z),z.visible=!0,L.position.z=.001,q.disabled=!0}},x.current.appendChild(q);let A=new l.tBo,M=new l.I9Y,T=!1,O=new l.Pq0;r.addEventListener("pointerdown",e=>{if(!i)return;M.set(e.clientX/window.innerWidth*2-1,-(2*(e.clientY/window.innerHeight))+1),A.setFromCamera(M,m);let t=A.intersectObject(L,!0);t.length&&(T=!0,r.style.cursor="grabbing",O.copy(t[0].point).sub(z.getWorldPosition(new l.Pq0)))}),r.addEventListener("pointermove",e=>{if(!T||!i)return;M.set(e.clientX/window.innerWidth*2-1,-(2*(e.clientY/window.innerHeight))+1),A.setFromCamera(M,m);let t=A.intersectObject(i,!0);if(t.length){let e=t[0].point.clone(),n=i.worldToLocal(e).sub(O),r=W/2-S/2,o=B/2-F/2;n.x=l.cj9.clamp(n.x,-r,+r),n.y=l.cj9.clamp(n.y,-o,+o),z.position.copy(n)}}),r.addEventListener("pointerup",()=>{T=!1,r.style.cursor="grab"});let _=(e,t)=>{y.current=n.requestAnimationFrame(_);let i=n.renderState.baseLayer;o.bindFramebuffer(o.FRAMEBUFFER,i.framebuffer),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT);let r=t.getViewerPose(f);if(!r)return;let a=r.views[0],l=i.getViewport(a);d.setViewport(l.x,l.y,l.width,l.height),m.matrix.fromArray(a.transform.matrix),m.matrix.decompose(m.position,m.quaternion,m.scale),m.projectionMatrix.fromArray(a.projectionMatrix),m.updateMatrixWorld(!0),d.render(c,m)};n.requestAnimationFrame(_),n.addEventListener("end",()=>{q.remove()})}function C(){t(null),v()}return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto",padding:"2rem"},children:[(0,n.jsx)("h1",{style:{textAlign:"center",fontWeight:300},children:"Print Collection"}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(300px,1fr))",gap:"2rem"},children:[{id:1,title:"Mountain Sunset",src:"/my-lovely-app/images/source.jpg",description:"35mm film scan of mountain landscape at sunset. Captured on Kodak Portra 400 with a Nikon F3.",sizes:[{size:'8x10"',price:45,widthCm:25.4,heightCm:20.32},{size:'11x14"',price:75,widthCm:35.56,heightCm:27.94},{size:'16x20"',price:120,widthCm:50.8,heightCm:40.64}],tags:["landscape","35mm","color"]}].map(e=>(0,n.jsxs)("div",{onClick:()=>{t(e),s(!1),c(null)},style:{cursor:"pointer",overflow:"hidden",borderRadius:8,boxShadow:"0 4px 8px rgba(0,0,0,0.1)",background:"white"},children:[(0,n.jsx)("div",{style:{position:"relative",height:240},children:(0,n.jsx)(o.default,{src:e.src,alt:e.title,fill:!0,style:{objectFit:"cover"}})}),(0,n.jsxs)("div",{style:{padding:"1rem",borderTop:"1px solid #eee"},children:[(0,n.jsx)("h3",{style:{margin:0},children:e.title}),(0,n.jsx)("div",{style:{display:"flex",gap:4,flexWrap:"wrap"},children:e.tags.map(e=>(0,n.jsx)("span",{style:{background:"#f0f0f0",padding:"0.2rem 0.5rem",borderRadius:12,fontSize:12,color:"#666"},children:e},e))})]})]},e.id))}),e&&(0,n.jsx)("div",{onClick:C,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,n.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:8,display:f>768?"flex":"block",width:"90%",maxWidth:1200,maxHeight:"90vh",overflow:"hidden"},children:[(0,n.jsx)("button",{onClick:C,style:{position:"absolute",top:10,right:20,fontSize:24,background:"transparent",border:"none",cursor:"pointer",zIndex:1},children:"\xd7"}),(0,n.jsx)("div",{style:{flex:3,position:"relative",background:"#f5f5f5",height:f>768?"80vh":240},children:(0,n.jsx)(o.default,{src:e.src,alt:e.title,fill:!0,style:{objectFit:"contain"}})}),(0,n.jsxs)("div",{style:{flex:1,padding:"2rem",overflowY:"auto",borderLeft:f>768?"1px solid #eee":"none"},children:[(0,n.jsx)("h2",{style:{marginTop:0},children:e.title}),(0,n.jsx)("button",{onClick:function(){s(e=>!e)},style:{marginBottom:"1rem"},children:i?"Hide Details":"Show Details"}),i&&(0,n.jsx)("p",{children:e.description}),(0,n.jsx)("h3",{children:"Available Sizes"}),(0,n.jsx)("ul",{style:{listStyle:"none",padding:0},children:e.sizes.map(t=>(0,n.jsxs)("li",{style:{marginBottom:"1rem"},children:[(0,n.jsxs)("label",{style:{cursor:"pointer"},children:[(0,n.jsx)("input",{type:"radio",name:"size",checked:d===t,onChange:()=>{c(t)}})," ",t.size," â€” $",t.price]}),u&&(0,n.jsx)("button",{onClick:()=>j(e,t),disabled:m,style:{marginLeft:8},children:m?"AR Active":"View in Your Space"})]},t.size))})]})]})}),(0,n.jsx)("div",{ref:x,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1100}})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[367,212,766,441,684,358],()=>t(2068)),_N_E=e.O()}]);