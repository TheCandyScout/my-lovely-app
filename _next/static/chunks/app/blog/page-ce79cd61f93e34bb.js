(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{2068:(e,t,i)=>{Promise.resolve().then(i.bind(i,4269))},4269:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i(5155),r=i(2115),o=i(6766),s=i(7431),a=i(3264);function l(){let[e,t]=(0,r.useState)(null),[i,l]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),[u,p]=(0,r.useState)(!1),[f,h]=(0,r.useState)(!1),[m,x]=(0,r.useState)(1200),w=(0,r.useRef)(null),g=(0,r.useRef)(null),v=(0,r.useRef)(null),y=(0,r.useRef)(null),b=(0,r.useRef)(void 0);function j(){t(null),S()}function S(){var e,t;v.current&&(v.current.end(),v.current=null),null!=y.current&&(cancelAnimationFrame(y.current),y.current=null),(null==(e=g.current)?void 0:e.parentElement)&&(g.current.parentElement.removeChild(g.current),g.current=null),null==(t=b.current)||t.cancel(),b.current=null,h(!1)}async function C(e,t){if(u)try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop());let i=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","camera-access"],domOverlay:{root:w.current}});v.current=i,h(!0);let n=document.createElement("div");Object.assign(n.style,{position:"absolute",top:"5px",left:"5px",background:"rgba(0,0,0,0.7)",color:"white",padding:"5px",fontSize:"10px",zIndex:"10000",pointerEvents:"none"}),n.innerText="AR initializing…",document.body.appendChild(n);let r=document.createElement("canvas");Object.assign(r.style,{position:"fixed",top:0,left:0,width:"100%",height:"100%"}),document.body.appendChild(r),g.current=r;let o=r.getContext("webgl2",{xrCompatible:!0,alpha:!0});await o.makeXRCompatible();let l=new XRWebGLLayer(i,o);await i.updateRenderState({baseLayer:l});let d=new s.JeP({canvas:r,context:o,alpha:!0});d.setPixelRatio(window.devicePixelRatio),d.setSize(window.innerWidth,window.innerHeight),d.xr.enabled=!0,d.xr.setReferenceSpaceType("local"),d.xr.setSession(i);let c=new a.Z58;c.add(new a.dth(0xffffff,4473924,1));let u=new a.ZyN(0xffffff,1.2);u.position.set(0,5,0),c.add(u);let p=new a.ubm(75,window.innerWidth/window.innerHeight,.1,1e3);p.position.set(0,1.6,3);let f=await i.requestReferenceSpace("local"),m=await i.requestReferenceSpace("viewer");if("function"!=typeof XRHitTestSource)throw Error("Hit-test API not supported by this XRSession");b.current=await i.requestHitTestSource({space:m});let x=.01*t.widthCm,j=.01*t.heightCm,C=new a.Tap,k=new a.YJl,R=new a.eaF(new a.iNn(.2,.2,.2),new a._4j({color:0xff0000}));R.position.set(0,p.position.y-.1,-.5),c.add(R),c.add(k),C.load(e.src,e=>{e.colorSpace=a.er$;let t=new a.V9B({map:e,side:a.$EB}),i=new a.eaF(new a.bdM(x,j),t);i.position.z=.011,k.add(i)},void 0,e=>console.error("Texture load error:",e));let z=!1;i.addEventListener("select",e=>{if(z)return;let t=e.frame.getHitTestResults(b.current);if(t.length){z=!0;let e=t[0].getPose(f);k.position.set(e.transform.position.x,e.transform.position.y,e.transform.position.z),k.quaternion.set(e.transform.orientation.x,e.transform.orientation.y,e.transform.orientation.z,e.transform.orientation.w),n.innerText="Placed on wall!"}});let E=window.setTimeout(()=>{if(!z){z=!0;let e=p.position.y;k.position.set(0,e-j/2,-2),k.lookAt(p.position),n.innerText="Fallback placement"}},5e3);i.requestAnimationFrame(function e(t,n){y.current=i.requestAnimationFrame(e);let r=i.renderState.baseLayer;o.bindFramebuffer(o.FRAMEBUFFER,r.framebuffer);let s=n.getViewerPose(f);if(!s)return;let a=s.views[0],l=r.getViewport(a);l&&(d.setViewport(0,0,l.width,l.height),p.matrix.fromArray(a.transform.matrix),p.projectionMatrix.fromArray(a.projectionMatrix),p.updateMatrixWorld(!0),d.render(c,p))}),i.addEventListener("end",()=>{clearTimeout(E),S()})}catch(e){console.error("AR launch error:",e),S()}}return(0,r.useEffect)(()=>{let e=()=>x(window.innerWidth);return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{var e;(null==(e=navigator.xr)?void 0:e.isSessionSupported)&&navigator.xr.isSessionSupported("immersive-ar").then(p)},[]),(0,r.useEffect)(()=>()=>S(),[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto",padding:"2rem"},children:[(0,n.jsx)("h1",{style:{textAlign:"center",fontWeight:300},children:"Print Collection"}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,minmax(300px,1fr))",gap:"2rem"},children:[{id:1,title:"Mountain Sunset",src:"/my-lovely-app/images/source.jpg",description:"35mm film scan of mountain landscape at sunset. Captured on Kodak Portra 400 with a Nikon F3.",sizes:[{size:'8x10"',price:45,widthCm:25.4,heightCm:20.32},{size:'11x14"',price:75,widthCm:35.56,heightCm:27.94},{size:'16x20"',price:120,widthCm:50.8,heightCm:40.64}],tags:["landscape","35mm","color"]}].map(e=>(0,n.jsxs)("div",{onClick:()=>{t(e),l(!1),c(null)},style:{cursor:"pointer",overflow:"hidden",borderRadius:8,boxShadow:"0 4px 8px rgba(0,0,0,0.1)",background:"white"},children:[(0,n.jsx)("div",{style:{position:"relative",height:240},children:(0,n.jsx)(o.default,{src:e.src,alt:e.title,fill:!0,style:{objectFit:"cover"}})}),(0,n.jsxs)("div",{style:{padding:"1rem",borderTop:"1px solid #eee"},children:[(0,n.jsx)("h3",{style:{margin:0},children:e.title}),(0,n.jsx)("div",{style:{display:"flex",gap:4,flexWrap:"wrap"},children:e.tags.map(e=>(0,n.jsx)("span",{style:{background:"#f0f0f0",padding:"0.2rem 0.5rem",borderRadius:12,fontSize:12,color:"#666"},children:e},e))})]})]},e.id))}),e&&(0,n.jsx)("div",{onClick:j,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,n.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:8,display:m>768?"flex":"block",width:"90%",maxWidth:1200,maxHeight:"90vh",overflow:"hidden"},children:[(0,n.jsx)("button",{onClick:j,style:{position:"absolute",top:10,right:20,fontSize:24,background:"transparent",border:"none",cursor:"pointer",zIndex:1},children:"\xd7"}),(0,n.jsx)("div",{style:{flex:3,position:"relative",background:"#f5f5f5",height:m>768?"80vh":240},children:(0,n.jsx)(o.default,{src:e.src,alt:e.title,fill:!0,style:{objectFit:"contain"}})}),(0,n.jsxs)("div",{style:{flex:1,padding:"2rem",overflowY:"auto",borderLeft:m>768?"1px solid #eee":"none"},children:[(0,n.jsx)("h2",{style:{marginTop:0},children:e.title}),(0,n.jsx)("button",{onClick:function(){l(e=>!e)},style:{marginBottom:"1rem"},children:i?"Hide Details":"Show Details"}),i&&(0,n.jsx)("p",{children:e.description}),(0,n.jsx)("h3",{children:"Available Sizes"}),(0,n.jsx)("ul",{style:{listStyle:"none",padding:0},children:e.sizes.map(t=>(0,n.jsxs)("li",{style:{marginBottom:"1rem"},children:[(0,n.jsxs)("label",{style:{cursor:"pointer"},children:[(0,n.jsx)("input",{type:"radio",name:"size",checked:d===t,onChange:()=>{c(t)}})," ",t.size," — $",t.price]}),u&&(0,n.jsx)("button",{onClick:()=>C(e,t),disabled:f,style:{marginLeft:8},children:f?"AR Active":"View in Your Space"})]},t.size))})]})]})}),(0,n.jsx)("div",{ref:w,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1100,pointerEvents:"none"}})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[367,212,766,441,684,358],()=>t(2068)),_N_E=e.O()}]);