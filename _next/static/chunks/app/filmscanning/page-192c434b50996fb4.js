(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[690],{435:(e,i,t)=>{Promise.resolve().then(t.bind(t,1612))},1612:(e,i,t)=>{"use strict";t.r(i),t.d(i,{default:()=>u});var r=t(5155),n=t(2115),l=t(7579),o=t(495),s=t(5964),a=t.n(s);let h=e=>{let[i,t]=(0,n.useState)(null),[r,l]=(0,n.useState)(!0),[o,s]=(0,n.useState)(null),[a,h]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(!e){l(!1),s("No image URL provided");return}let i=new window.Image;return i.crossOrigin="anonymous",i.onload=()=>{t(i),h({width:i.naturalWidth||600,height:i.naturalHeight||400}),l(!1)},i.onerror=e=>{console.error("Image load error:",e),s("Failed to load image"),l(!1)},i.src=e,()=>{i.onload=null,i.onerror=null}},[e]),{image:i,dimensions:a,loading:r,error:o}},d=(e,i,t,r,n,l)=>{if(!e)return null;let o=l||.5,s=(null==r?void 0:r.width)||400,a=(null==r?void 0:r.height)||300,h=(null==n?void 0:n.width)||400,d=(null==n?void 0:n.height)||400,g=i?i.width:e.width,c=i?i.height:e.height,m=t.x/(s/g),u=t.y/(a/c),f=h/o,x=d/o,p=Math.max(0,Math.min(m-f/2,g-f)),w=Math.max(0,Math.min(u-x/2,c-x)),y=p,v=w,j=o,b=o;if(i&&e!==i){let i=e.width/g,t=e.height/c;y=p*i,v=w*t,j=o/i,b=o/t}return{x:y,y:v,scaleX:j,scaleY:b,sourceWidth:f,sourceHeight:x,centerX:m,centerY:u}},g=n.memo(e=>{let{image:i,params:t,width:n,height:o}=e;return(0,r.jsx)(l.BI,{width:n,height:o,style:{width:"100%",height:"100%",display:"block"},children:(0,r.jsx)(l.Wd,{children:(0,r.jsx)(l.rw,{x:0,y:0,width:n,height:o,fillPatternImage:i,fillPatternScale:{x:t.scaleX,y:t.scaleY},fillPatternOffset:{x:t.x,y:t.y}})})})},(e,i)=>e.image===i.image&&e.width===i.width&&e.height===i.height&&e.params.x===i.params.x&&e.params.y===i.params.y&&e.params.scaleX===i.params.scaleX&&e.params.scaleY===i.params.scaleY);g.displayName="MagnifiedViewContent";let c=e=>{let{image:i,referenceImage:t,magnifierPosition:l,stageDimensions:o,magDimensions:s,zoomScale:a,loading:h}=e,c=(0,n.useRef)(null),m=(0,n.useMemo)(()=>i?d(i,t,l,o,s||{width:400,height:400},a||.5):null,[i,t,l,o,s,a]);if((0,n.useEffect)(()=>{let e=c.current;return()=>{e&&e.destroyChildren&&(e.destroyChildren(),e.destroy())}},[]),h||!i||!m)return(0,r.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5",borderRadius:"8px"},children:(0,r.jsx)("div",{className:"loader",children:"Loading..."})});let u=(null==s?void 0:s.width)||400,f=(null==s?void 0:s.height)||400;return(0,r.jsx)(g,{image:i,params:m,width:u,height:f})};c.displayName="MagnifiedView";let m=n.memo(e=>{let{image:i,loading:t,stageDimensions:n,showRectangle:o,magnifierPosition:s,lensSize:a,onMouseMove:h,onTouchMove:d,onClick:g}=e;return t||!i?(0,r.jsx)("div",{style:{width:"100%",paddingBottom:"135.333%",position:"relative",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)("div",{className:"loader",children:"Loading..."})}):(0,r.jsx)("div",{style:{width:"100%",paddingBottom:"".concat(n.height/n.width*100,"%"),position:"relative",border:"1px solid #ccc",borderRadius:"8px",overflow:"hidden"},children:(0,r.jsx)(l.BI,{width:n.width,height:n.height,onClick:g,onTouchStart:g,onMouseMove:h,onTouchMove:d,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"8px"},children:(0,r.jsxs)(l.Wd,{children:[(0,r.jsx)(l._V,{image:i,x:0,y:0,width:n.width,height:n.height}),o&&(0,r.jsx)(l.rw,{x:s.x-a.width/2,y:s.y-a.height/2,width:a.width,height:a.height,stroke:"red",strokeWidth:2})]})})})});function u(){let e="/my-lovely-app/images/source.jpg",i="/my-lovely-app/images/source-1.png",{image:t,dimensions:l,loading:s,error:d}=h(e),{image:g,loading:u,error:f}=h(i),[x,p]=(0,n.useState)({x:0,y:0}),[w,y]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1),[b,S]=(0,n.useState)({width:400,height:300}),[k]=(0,n.useState)({width:400,height:400}),[C]=(0,n.useState)(400),[M]=(0,n.useState)(.5),R=(0,n.useRef)(null),I=(0,n.useRef)(null),E=(0,n.useRef)(null),N=(0,n.useRef)(null),P=(0,n.useRef)(null),z=(0,n.useRef)(null);(0,n.useEffect)(()=>{t&&!s&&p({x:b.width/2,y:b.height/2})},[t,s,b.width,b.height]);let W=(0,n.useCallback)(()=>{if(!R.current||!l)return;let e=R.current.offsetWidth||400,i=l.width||600,t=Math.floor(e*(l.height||400)/i)||300;S({width:e,height:t})},[l]);(0,n.useEffect)(()=>{if(t&&!s&&l&&R.current){let e=a()(W,150),i=R.current,t=new ResizeObserver(e);return z.current=t,t.observe(i),W(),()=>{t&&t.disconnect()}}},[t,s,l,W]);let T=(0,n.useCallback)(e=>{if(!w)return;let i=e.target.getStage(),t=null==i?void 0:i.getPointerPosition();t&&p(t)},[w]),D=(0,n.useCallback)(e=>{var i;if(!w)return;e.evt.preventDefault();let t=null==(i=e.target.getStage())?void 0:i.getPointerPosition();t&&p(t)},[w]),B=(0,n.useCallback)(e=>{let i=e.target.getStage(),t=null==i?void 0:i.getPointerPosition();t&&(y(e=>!e),j(!0),p(t))},[]),O=(0,n.useMemo)(()=>{if(!t)return{width:50,height:50};let e=k.width/M,i=k.height/M,r=b.width/t.width,n=b.height/t.height;return{width:isNaN(e*r)?50:e*r,height:isNaN(i*n)?50:i*n}},[t,k,M,b]),_={flex:"1 1 400px",maxWidth:"400px",height:"400px",border:"1px solid #ccc",borderRadius:"8px",overflow:"hidden"};return(0,n.useEffect)(()=>{d&&console.error("Error loading image 1:",d),f&&console.error("Error loading image 2:",f)},[d,f]),(0,n.useEffect)(()=>()=>{z.current&&z.current.disconnect()},[]),(0,n.useEffect)(()=>{[e,i].forEach(e=>{new Image().src=e})},[e,i]),(0,r.jsxs)("article",{style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem",lineHeight:"1.6"},children:[(0,r.jsxs)("header",{style:{marginBottom:"2rem"},children:[(0,r.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem"},children:"Comparing Cropped Image Quality"}),(0,r.jsx)("p",{style:{fontSize:"1rem",color:"#444"},children:"Tap or click on the image to see the magnified view."})]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"2rem",justifyContent:"center",alignItems:"flex-start"},children:[(0,r.jsxs)("div",{ref:R,style:{position:"relative",width:"100%",maxWidth:"600px",textAlign:"center"},children:[(0,r.jsx)(m,{image:t,loading:s,stageDimensions:b,showRectangle:v,magnifierPosition:x,lensSize:O,onMouseMove:T,onTouchMove:D,onClick:B}),(0,r.jsx)("p",{style:{fontSize:"0.9rem",color:"#666",marginTop:"0.5rem"},children:"Tap or click on the image to see the magnified view."})]}),(0,r.jsx)("div",{ref:E,style:{..._,display:w?"block":"none"},children:(0,r.jsx)(c,{image:t,loading:s,referenceImage:t,magnifierPosition:x,stageDimensions:b,magDimensions:k,zoomScale:M})}),(0,r.jsxs)("div",{ref:I,style:{..._,height:"".concat(C,"px"),display:w?"none":"block"},children:[t&&g&&!s&&!u?(0,r.jsx)(o.EW,{position:50,style:{width:"100%",height:"100%",borderRadius:"8px"},itemOne:(0,r.jsx)("div",{style:{width:"100%",height:"100%"},ref:N,children:(0,r.jsx)(c,{image:t,loading:s,referenceImage:t,magnifierPosition:x,stageDimensions:b,magDimensions:k,zoomScale:M})}),itemTwo:(0,r.jsx)("div",{style:{width:"100%",height:"100%"},ref:P,children:(0,r.jsx)(c,{image:g,loading:u,referenceImage:t,magnifierPosition:x,stageDimensions:b,magDimensions:k,zoomScale:M})})}):(0,r.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5"},children:(0,r.jsx)("div",{className:"loader",children:"Loading..."})}),(0,r.jsx)("p",{style:{fontSize:"0.9rem",color:"#666",marginTop:"0.5rem",textAlign:"center"},children:"Slide to compare between two different magnifications."})]})]}),(0,r.jsxs)("section",{style:{marginTop:"2rem"},children:[(0,r.jsx)("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:"Observations"}),(0,r.jsx)("p",{style:{fontSize:"1rem",color:"#333"},children:"The magnified view allows detailed inspection of images by tapping or clicking on them."})]})]})}m.displayName="MainImageView"}},e=>{var i=i=>e(e.s=i);e.O(0,[413,218,441,684,358],()=>i(435)),_N_E=e.O()}]);