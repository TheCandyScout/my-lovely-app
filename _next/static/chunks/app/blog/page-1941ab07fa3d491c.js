(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{827:e=>{e.exports={backdrop:"Modal_backdrop__ceFfZ",fadeIn:"Modal_fadeIn__1PeRi",modal:"Modal_modal__mn4q4",header:"Modal_header__kDbZq",closeButton:"Modal_closeButton__VzEdu",body:"Modal_body__A8lm_"}},2068:(e,t,n)=>{Promise.resolve().then(n.bind(n,9058))},9058:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var r=n(5155),i=n(2115),a=n(6766),o=n(7650),l=n(6894),s=n(7281),d=n(827),c=n.n(d);function m(e){let{open:t,onClose:n,title:a,children:d}=e,[m,u]=(0,i.useState)(null);return((0,i.useEffect)(()=>{let e=document.getElementById("modal-root");function t(e){"Escape"===e.key&&n()}return e||((e=document.createElement("div")).id="modal-root",document.body.appendChild(e)),u(e),document.addEventListener("keydown",t),(0,s.mh)(e,{reserveScrollBarGap:!0}),()=>{document.removeEventListener("keydown",t),(0,s.fY)(e)}},[n]),t&&m)?o.createPortal((0,r.jsx)("div",{className:c().backdrop,role:"dialog","aria-modal":"true","aria-labelledby":a?"modal-title":void 0,onClick:n,children:(0,r.jsx)(l.Ay,{children:(0,r.jsxs)("div",{className:c().modal,onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("header",{className:c().header,children:[a&&(0,r.jsx)("h2",{id:"modal-title",children:a}),(0,r.jsx)("button",{"aria-label":"Close dialog",className:c().closeButton,onClick:n,children:"\xd7"})]}),(0,r.jsx)("div",{className:c().body,children:d})]})})}),m):null}var u=n(3264),h=n(7431);function p(){let[e,t]=(0,i.useState)(null),[n,o]=(0,i.useState)(null),[l,s]=(0,i.useState)(!1),[d,c]=(0,i.useState)(!1),p=(0,i.useRef)(null),f=(0,i.useRef)(null),g=(0,i.useRef)(null),w=(0,i.useRef)(null);(0,i.useEffect)(()=>{var e;null==(e=navigator.xr)||e.isSessionSupported("immersive-ar").then(e=>s(e)).catch(()=>s(!1))},[]);let x=(0,i.useCallback)(()=>{g.current&&(g.current.end(),g.current=null),null!=w.current&&(cancelAnimationFrame(w.current),w.current=null),f.current&&(f.current.remove(),f.current=null),c(!1)},[]);async function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;return new Promise((n,r)=>{let i=new window.Image;i.crossOrigin="anonymous",i.onload=()=>{let e=Math.min(t/i.naturalWidth,t/i.naturalHeight,1),r=Math.floor(i.naturalWidth*e),a=Math.floor(i.naturalHeight*e),o=document.createElement("canvas");o.width=r,o.height=a,o.getContext("2d").drawImage(i,0,0,r,a);let l=new u.gPd(o);l.flipY=!1,l.colorSpace=u.er$,l.needsUpdate=!0,l.generateMipmaps=!0,l.minFilter=u.$_I,n(l)},i.onerror=r,i.src=e})}async function b(e,t){if(!l)return;x(),(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop());let n=await navigator.xr.requestSession("immersive-ar",{optionalFeatures:["dom-overlay"],domOverlay:{root:p.current}});g.current=n,c(!0),n.addEventListener("end",x);let r=document.createElement("canvas");Object.assign(r.style,{position:"fixed",top:0,left:0,width:"100%",height:"100%",touchAction:"none",cursor:"grab"}),document.body.appendChild(r),f.current=r;let i=r.getContext("webgl2",{xrCompatible:!0,alpha:!0});await i.makeXRCompatible(),n.updateRenderState({baseLayer:new XRWebGLLayer(n,i)});let a=new h.JeP({canvas:r,context:i,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.xr.enabled=!0,a.xr.setSession(n),a.xr.setReferenceSpaceType("local");let o=new u.Z58;o.add(new u.dth(0xffffff,4473924,1));let s=new u.ZyN(0xffffff,1.2);s.position.set(0,5,0),o.add(s);let d=new u.ubm(70,window.innerWidth/window.innerHeight,.01,20),m=await n.requestReferenceSpace("local"),w=.01*t.widthCm,b=.01*t.heightCm,v=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;return new Promise((n,r)=>{let i=new window.Image;i.crossOrigin="anonymous",i.onload=()=>{let e=Math.min(t/i.naturalWidth,t/i.naturalHeight,1),r=Math.floor(i.naturalWidth*e),a=Math.floor(i.naturalHeight*e),o=document.createElement("canvas");o.width=r,o.height=a,o.getContext("2d").drawImage(i,0,0,r,a);let l=new u.gPd(o);l.flipY=!1,l.colorSpace=u.er$,l.needsUpdate=!0,l.generateMipmaps=!0,l.minFilter=u.$_I,n(l)},i.onerror=r,i.src=e})}(e.src),j=v.image.width/v.image.height,C=w,_=b;j>w/b?_=w/j:C=b*j;let k=new u.YJl;k.visible=!1,o.add(k);let S=new u.V9B({map:v,side:u.$EB,depthWrite:!0}),E=new u.eaF(new u.bdM(C,_),S);k.add(E),y(e.src,Math.max(2048,1e3*C,1e3*_)).then(e=>{S.map=e,S.needsUpdate=!0}).catch(console.warn);let M=null,F=null;n.addEventListener("select",()=>{M||function(){if(!F)return;let e=F.views[0],t=new u.kn4().fromArray(e.transform.matrix),n=new u.Pq0,r=new u.PTz;t.decompose(n,r,new u.Pq0);let i=new u.Pq0(0,0,-1).applyQuaternion(r).setY(0).normalize(),a=n.clone().add(i.multiplyScalar(3*.0254)),l=new u.kn4().lookAt(a,n,new u.Pq0(0,1,0)),s=new u.PTz().setFromRotationMatrix(l).multiply(new u.PTz().setFromAxisAngle(new u.Pq0(0,0,1),Math.PI)),d=4/3*C,c=4/3*_;(M=new u.eaF(new u.bdM(d,c),new u.V9B({color:0xdddddd,side:u.$EB}))).position.copy(a),M.quaternion.copy(s),k.position.set(0,0,0),k.quaternion.identity(),M.add(k),k.visible=!0,o.add(M),E.position.z=-.001}()}),n.requestAnimationFrame(function e(t,r){n.requestAnimationFrame(e);let l=n.renderState.baseLayer;i.bindFramebuffer(i.FRAMEBUFFER,l.framebuffer),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT);let s=r.getViewerPose(m);if(!s)return;F=s;let c=s.views[0],u=l.getViewport(c);a.setViewport(u.x,u.y,u.width,u.height),d.matrix.fromArray(c.transform.matrix),d.matrix.decompose(d.position,d.quaternion,d.scale),d.projectionMatrix.fromArray(c.projectionMatrix),d.updateMatrixWorld(!0),a.render(o,d)}),n.addEventListener("end",()=>r.remove())}(0,i.useEffect)(()=>()=>x(),[x]);let v=e=>{t(e),o(null)},j=e=>o(e);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto",padding:"3rem 2rem",background:"#faf9f5",fontFamily:"'Playfair Display', serif"},children:[(0,r.jsx)("h1",{style:{textAlign:"center",fontWeight:300,marginBottom:"2rem",fontSize:"3rem"},children:"Print Collection"}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"2.5rem",alignItems:"start"},children:[{id:1,title:"Mountain Sunset",src:"/my-lovely-app/images/source.jpg",description:"35mm film scan of mountain landscape at sunset. Captured on Kodak Portra 400 with a Nikon F3.",sizes:[{size:'8\xd710"',price:45,widthCm:25.4,heightCm:20.32},{size:'11\xd714"',price:75,widthCm:35.56,heightCm:27.94},{size:'16\xd720"',price:120,widthCm:50.8,heightCm:40.64}],tags:["landscape","35mm","color"]}].map(e=>(0,r.jsxs)("figure",{onClick:()=>v(e),style:{cursor:"pointer",overflow:"hidden",borderRadius:4,background:"white",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:e=>Object.assign(e.currentTarget.style,{transform:"translateY(-4px)",boxShadow:"0 8px 16px rgba(0,0,0,0.12)"}),onMouseLeave:e=>Object.assign(e.currentTarget.style,{transform:"none",boxShadow:"0 2px 6px rgba(0,0,0,0.08)"}),children:[(0,r.jsx)("div",{style:{background:"#f5f3ee",display:"flex",alignItems:"center",justifyContent:"center",height:300},children:(0,r.jsx)(a.default,{src:e.src,alt:e.title,width:400,height:300,style:{objectFit:"contain",maxWidth:"100%",height:"auto"}})}),(0,r.jsxs)("figcaption",{style:{padding:"1rem 1.2rem"},children:[(0,r.jsx)("h3",{style:{margin:0,fontSize:"1.1rem"},children:e.title}),(0,r.jsx)("div",{style:{marginTop:"0.5rem",color:"#777",fontSize:"0.9rem"},children:e.tags.join(" • ")})]})]},e.id))})]}),(0,r.jsx)(m,{open:!!e,onClose:()=>{t(null),x()},title:null==e?void 0:e.title,children:e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{flex:3,background:"#f5f3ee",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(a.default,{src:e.src,alt:e.title,width:800,height:600,style:{objectFit:"contain",maxWidth:"100%",height:"auto"}})}),(0,r.jsxs)("div",{style:{flex:2,padding:"1.5rem",fontFamily:"'Helvetica Neue', sans-serif"},children:[(0,r.jsx)("p",{style:{lineHeight:1.6},children:e.description}),(0,r.jsx)("h3",{children:"Available Sizes"}),(0,r.jsx)("ul",{style:{listStyle:"none",padding:0},children:e.sizes.map(t=>(0,r.jsxs)("li",{style:{marginBottom:"1rem"},children:[(0,r.jsxs)("label",{style:{cursor:"pointer",fontSize:"1rem"},children:[(0,r.jsx)("input",{type:"radio",name:"size",checked:n===t,onChange:()=>j(t)})," ",t.size," — $",t.price]}),l&&(0,r.jsx)("button",{onClick:()=>b(e,t),disabled:d,style:{marginLeft:8,background:d?"#777":"#333",color:"white",border:"none",padding:"0.3rem 0.8rem",cursor:d?"default":"pointer",borderRadius:4},children:d?"AR Active":"View in Your Space"})]},t.size))})]})]})}),(0,r.jsx)("div",{ref:p,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1100}})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[88,367,212,515,441,684,358],()=>t(2068)),_N_E=e.O()}]);