(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{2068:(e,t,r)=>{Promise.resolve().then(r.bind(r,4269))},4269:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var i=r(5155),n=r(2115),o=r(6766),s=r(7431),l=r(3264);function a(){let[e,t]=(0,n.useState)(null),[r,a]=(0,n.useState)(!1),[d,c]=(0,n.useState)(!1),[u,p]=(0,n.useState)(null),[f,m]=(0,n.useState)(!1),[h,x]=(0,n.useState)(1200),g=(0,n.useRef)(null),b=(0,n.useRef)(null),v=(0,n.useRef)(null),w=(0,n.useRef)(null),y=(0,n.useRef)(null),j=(0,n.useRef)(null),C=(0,n.useRef)(null),k=(0,n.useRef)(null),R=(0,n.useRef)(null),S=(0,n.useRef)(void 0);function z(){t(null),E()}function E(){var e,t,r;v.current&&(v.current.end(),v.current=null),null!=C.current&&(cancelAnimationFrame(C.current),C.current=null),(null==(e=b.current)?void 0:e.parentElement)&&(b.current.parentElement.removeChild(b.current),b.current=null),(null==(t=R.current)?void 0:t.parentElement)&&(R.current.parentElement.removeChild(R.current),R.current=null),null==(r=S.current)||r.cancel(),S.current=null,m(!1)}async function T(e,t){if(d)try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop());let r=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","camera-access"],domOverlay:{root:g.current}});v.current=r,m(!0);let i=document.createElement("div");Object.assign(i.style,{position:"absolute",top:"5px",left:"5px",background:"rgba(0,0,0,0.7)",color:"white",padding:"5px",fontSize:"10px",zIndex:"10000",pointerEvents:"none"}),i.innerText="AR initializingâ€¦",document.body.appendChild(i),R.current=i;let n=document.createElement("canvas");Object.assign(n.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}),document.body.appendChild(n),b.current=n;let o=n.getContext("webgl2",{xrCompatible:!0,alpha:!0,antialias:!0,powerPreference:"high-performance"});await o.makeXRCompatible();let a=new XRWebGLLayer(r,o);await r.updateRenderState({baseLayer:a});let d=new s.JeP({canvas:n,context:o,antialias:!0,alpha:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!0});d.setPixelRatio(window.devicePixelRatio),d.setClearColor(0,0),d.xr.enabled=!0,d.xr.setReferenceSpaceType("local"),d.xr.setSession(r),w.current=d;let c=new l.Z58;y.current=c,c.add(new l.dth(0xffffff,4473924,1));let u=new l.ZyN(0xffffff,1.2);u.position.set(0,5,0),c.add(u),c.add(new l.$p8(0xffffff,1));let p=new l.ubm(75,window.innerWidth/window.innerHeight,.1,1e3);p.position.set(0,1.6,3),j.current=p;let f=await r.requestReferenceSpace("local"),h=await r.requestReferenceSpace("viewer"),x=r.requestHitTestSource;if("function"!=typeof x)throw Error("Hit-test API not supported by this XRSession");S.current=await r.requestHitTestSource({space:h});let z=.01*t.widthCm,T=.01*t.heightCm,A=new l.Tap().load(e.src),F=new l.V9B({map:A,side:l.$EB,transparent:!0,opacity:1}),P=new l.eaF(new l.bdM(z,T),F),M=new l.eaF(new l.iNn(1.1*z,1.1*T,.02),new l._4j({color:6045747,roughness:.5,metalness:.1}));P.position.z=.011;let W=new l.YJl;W.add(M,P),W.visible=!1,k.current=W,c.add(W);let B=!1;r.addEventListener("select",e=>{if(B)return;let t=e.frame.getHitTestResults(S.current);if(t.length){B=!0;let e=t[0].getPose(f);W.position.set(e.transform.position.x,e.transform.position.y,e.transform.position.z),W.lookAt(p.position),W.visible=!0,i.innerText+="\nPlaced via tap"}});let L=window.setTimeout(()=>{if(!B){let e=p.position.y;W.position.set(0,e,-2),W.lookAt(p.position),W.visible=!0,B=!0,i.innerText+="\nFallback placement"}},5e3);r.requestAnimationFrame(function e(t,n){C.current=r.requestAnimationFrame(e),i.innerText="AR: time=".concat(t.toFixed(0)," visible=").concat(W.visible);let s=r.renderState.baseLayer;o.bindFramebuffer(o.FRAMEBUFFER,s.framebuffer);let l=n.getViewerPose(f);if(!l)return;let a=l.views[0],u=s.getViewport(a);if(u){if(d.setSize(u.width,u.height),d.setViewport(0,0,u.width,u.height),p.matrix.fromArray(a.transform.matrix),p.projectionMatrix.fromArray(a.projectionMatrix),p.updateMatrixWorld(!0),!B){let e=p.position.y;W.position.set(0,e,-2),W.lookAt(p.position),W.visible=!0,B=!0,i.innerText+="\nDefault eye-level"}d.render(c,p)}}),r.addEventListener("end",()=>{clearTimeout(L),E()})}catch(e){console.error("AR launch error:",e),E()}}return(0,n.useEffect)(()=>{let e=()=>x(window.innerWidth);return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>{!async function(){var e;(null==(e=navigator.xr)?void 0:e.isSessionSupported)&&c(await navigator.xr.isSessionSupported("immersive-ar"))}()},[]),(0,n.useEffect)(()=>()=>E(),[]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto",padding:"2rem"},children:[(0,i.jsx)("h1",{style:{textAlign:"center",fontWeight:300},children:"Print Collection"}),(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px,1fr))",gap:"2rem"},children:[{id:1,title:"Mountain Sunset",src:"/my-lovely-app/images/source.jpg",description:"35mm film scan of mountain landscape at sunset. Captured on Kodak Portra 400 with a Nikon F3.",sizes:[{size:'8x10"',price:45,widthCm:25.4,heightCm:20.32},{size:'11x14"',price:75,widthCm:35.56,heightCm:27.94},{size:'16x20"',price:120,widthCm:50.8,heightCm:40.64}],tags:["landscape","35mm","color"]}].map(e=>(0,i.jsxs)("div",{onClick:()=>{t(e),a(!1),p(null)},style:{cursor:"pointer",overflow:"hidden",borderRadius:8,boxShadow:"0 4px 8px rgba(0,0,0,0.1)",background:"white"},children:[(0,i.jsx)("div",{style:{position:"relative",height:240},children:(0,i.jsx)(o.default,{src:e.src,alt:e.title,fill:!0,style:{objectFit:"cover"}})}),(0,i.jsx)("div",{style:{padding:"1rem",borderTop:"1px solid #eee"},children:(0,i.jsx)("h3",{style:{margin:0},children:e.title})})]},e.id))}),e&&(0,i.jsx)("div",{onClick:z,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,i.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:8,width:"90%",maxWidth:1200,maxHeight:"90vh",overflowY:"auto",display:h>768?"flex":"block"},children:[(0,i.jsx)("button",{onClick:z,style:{position:"absolute",top:10,right:20,fontSize:"2rem",background:"transparent",border:"none",color:"#333",cursor:"pointer",zIndex:10},children:"\xd7"}),(0,i.jsx)("div",{style:{flex:h>768?3:"auto",position:"relative",backgroundColor:"#f5f5f5",height:h>768?"80vh":"50vh"},children:(0,i.jsx)(o.default,{src:e.src,alt:e.title,fill:!0,style:{objectFit:"contain"}})}),(0,i.jsxs)("div",{style:{flex:h>768?1:"auto",padding:"2rem",overflowY:"auto",borderLeft:h>768?"1px solid #eee":"none",maxHeight:h>768?"80vh":"40vh"},children:[(0,i.jsx)("h2",{style:{marginTop:0,marginBottom:"1rem",fontSize:"1.8rem"},children:e.title}),(0,i.jsx)("button",{onClick:function(){a(e=>!e)},style:{backgroundColor:"transparent",border:"1px solid #ddd",padding:"0.5rem 1rem",marginBottom:"1rem",cursor:"pointer",borderRadius:"4px",fontSize:"0.9rem"},children:r?"Hide Details":"Show Details"}),r&&(0,i.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,i.jsx)("p",{style:{marginBottom:"1rem",lineHeight:"1.6"},children:e.description}),(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginTop:"1rem"},children:e.tags.map(e=>(0,i.jsx)("span",{style:{background:"#f0f0f0",padding:"0.3rem 0.8rem",borderRadius:"20px",fontSize:"0.8rem",color:"#555"},children:e},e))})]}),(0,i.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,i.jsx)("h3",{style:{marginBottom:"1rem",fontSize:"1.2rem"},children:"Available Sizes"}),(0,i.jsx)("ul",{children:e.sizes.map(t=>(0,i.jsxs)("li",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:h>768?"nowrap":"wrap",padding:"1rem 0",borderBottom:"1px solid #eee"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,i.jsx)("input",{type:"radio",id:"size-".concat(t.size),name:"print-size",value:t.size,checked:u===t,onChange:()=>{p(t)}}),(0,i.jsx)("label",{htmlFor:"size-".concat(t.size),style:{fontWeight:500},children:t.size})]}),(0,i.jsxs)("span",{style:{fontWeight:"bold",color:"#555"},children:["$",t.price]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"0.5rem",marginLeft:"1rem",flex:h>768?"none":1},children:[(0,i.jsx)("button",{style:{padding:"0.5rem 1rem",border:"none",borderRadius:"4px",cursor:"pointer",backgroundColor:"#007bff",color:"white",transition:"background-color 0.2s",flex:h>768?"none":1},onMouseOver:e=>e.currentTarget.style.backgroundColor="#0066d6",onMouseOut:e=>e.currentTarget.style.backgroundColor="#007bff",children:"Purchase"}),d&&(0,i.jsx)("button",{onClick:()=>T(e,t),disabled:f,style:{padding:"0.5rem 1rem",border:"1px solid #ddd",borderRadius:"4px",cursor:"pointer",backgroundColor:"#f8f9fa",color:"#333",transition:"background-color 0.2s",flex:h>768?"none":1},onMouseOver:e=>e.currentTarget.style.backgroundColor="#e9ecef",onMouseOut:e=>e.currentTarget.style.backgroundColor="#f8f9fa",children:f?"AR Active":"View in Your Space"})]})]},t.size))})]})]})]})}),(0,i.jsx)("div",{ref:g,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1100,pointerEvents:"none"}})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[367,212,766,441,684,358],()=>t(2068)),_N_E=e.O()}]);