(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[395],{210:(e,t,i)=>{Promise.resolve().then(i.t.bind(i,6874,23)),Promise.resolve().then(i.bind(i,967))},967:(e,t,i)=>{"use strict";i.d(t,{default:()=>h});var n=i(5155),a=i(2115),r=i(6766),s=i(3264),l=i(7431),o=i(3727),c=i.n(o);function d(e){let{item:t,size:i,onEnd:r}=e,o=(0,a.useRef)(null),d=(0,a.useRef)(null),m=(0,a.useRef)(null),u=(0,a.useRef)(null),h=(0,a.useCallback)(()=>{d.current&&(d.current.end(),d.current=null),null!=u.current&&(cancelAnimationFrame(u.current),u.current=null),m.current&&(m.current.remove(),m.current=null),r()},[r]),p=(0,a.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;return new Promise((i,n)=>{let a=new Image;a.crossOrigin="anonymous",a.onload=()=>{let e=Math.min(t/a.naturalWidth,t/a.naturalHeight,1),n=Math.floor(a.naturalWidth*e),r=Math.floor(a.naturalHeight*e),l=document.createElement("canvas");l.width=n,l.height=r,l.getContext("2d").drawImage(a,0,0,n,r);let o=new s.gPd(l);o.flipY=!1,o.colorSpace=s.er$,o.needsUpdate=!0,o.generateMipmaps=!0,o.minFilter=s.$_I,i(o)},a.onerror=n,a.src=e})},[]),_=(0,a.useCallback)(async()=>{try{(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop());let e=await navigator.xr.requestSession("immersive-ar",{optionalFeatures:["dom-overlay"],domOverlay:{root:o.current}});d.current=e,e.addEventListener("end",h);let n=document.createElement("canvas");Object.assign(n.style,{position:"fixed",top:0,left:0,width:"100%",height:"100%",touchAction:"none",cursor:"grab"}),document.body.appendChild(n),m.current=n;let a=n.getContext("webgl2",{xrCompatible:!0,alpha:!0});await a.makeXRCompatible(),e.updateRenderState({baseLayer:new XRWebGLLayer(e,a)});let r=new l.JeP({canvas:n,context:a,alpha:!0});r.setSize(window.innerWidth,window.innerHeight),r.xr.enabled=!0,r.xr.setSession(e),r.xr.setReferenceSpaceType("local");let c=new s.Z58;c.add(new s.dth(0xffffff,4473924,1));let u=new s.ZyN(0xffffff,1.2);u.position.set(0,5,0),c.add(u);let _=new s.ubm(70,window.innerWidth/window.innerHeight,.01,20),w=await e.requestReferenceSpace("local"),x=.01*i.widthCm,f=.01*i.heightCm,v=await p(t.src),g=v.image,P=g.width/g.height,b=x,j=f;P>x/f?j=x/P:b=f*P;let z=new s.YJl;z.visible=!1,c.add(z);let y=new s.V9B({map:v,side:s.$EB,depthWrite:!0}),S=new s.eaF(new s.bdM(b,j),y);z.add(S),p(t.src,Math.max(2048,1e3*b,1e3*j)).then(e=>{y.map=e,y.needsUpdate=!0}).catch(console.warn);let N=null,C=null;e.addEventListener("select",()=>{N&&(c.remove(N),N=null,z.visible=!1),function(){if(!C)return;let e=C.views[0],t=new s.kn4().fromArray(e.transform.matrix),i=new s.Pq0,n=new s.PTz;t.decompose(i,n,new s.Pq0);let a=new s.Pq0(0,0,-1).applyQuaternion(n).setY(0).normalize(),r=i.clone().add(a.multiplyScalar(3*.0254)),l=new s.kn4().lookAt(r,i,new s.Pq0(0,1,0)),o=new s.PTz().setFromRotationMatrix(l).multiply(new s.PTz().setFromAxisAngle(new s.Pq0(0,0,1),Math.PI)),d=4/3,m=b*d,u=j*d;(N=new s.eaF(new s.bdM(m,u),new s.V9B({color:0xdddddd,side:s.$EB}))).position.copy(r),N.quaternion.copy(o),z.position.set(0,0,0),z.quaternion.identity(),N.add(z),z.visible=!0,c.add(N),S.position.z=-.001}()}),e.requestAnimationFrame(function t(i,n){e.requestAnimationFrame(t);let s=e.renderState.baseLayer;a.bindFramebuffer(a.FRAMEBUFFER,s.framebuffer),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);let l=n.getViewerPose(w);if(!l)return;C=l;let o=l.views[0],d=s.getViewport(o);r.setViewport(d.x,d.y,d.width,d.height),_.matrix.fromArray(o.transform.matrix),_.matrix.decompose(_.position,_.quaternion,_.scale),_.projectionMatrix.fromArray(o.projectionMatrix),_.updateMatrixWorld(!0),r.render(c,_)})}catch(e){console.error("AR error:",e),r()}},[h,p,t.src,i.widthCm,i.heightCm,r]);return(0,a.useEffect)(()=>(_(),()=>{h()}),[_,h]),(0,n.jsx)("div",{className:c().arContainer,children:(0,n.jsx)("div",{ref:o,className:c().arOverlay,children:(0,n.jsxs)("div",{className:c().arControls,children:[(0,n.jsx)("button",{className:c().closeButton,onClick:h,children:"Exit AR"}),(0,n.jsx)("div",{className:c().instructions,children:"Tap in your space to place the artwork"})]})})})}var m=i(9296),u=i.n(m);function h(e){let{item:t}=e,[i,s]=(0,a.useState)(null),[l,o]=(0,a.useState)(!1),[c,m]=(0,a.useState)(!1),[h,p]=(0,a.useState)(0);return(0,a.useEffect)(()=>{var e;null==(e=navigator.xr)||e.isSessionSupported("immersive-ar").then(e=>o(e)).catch(()=>o(!1)),p(window.innerHeight);let t=()=>p(window.innerHeight);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),(0,n.jsxs)("div",{className:u().container,children:[(0,n.jsx)("div",{className:u().imageSection,style:{height:"".concat(h>0?.9*h-80:700,"px")},children:(0,n.jsx)("div",{className:u().mainImage,children:(0,n.jsx)(r.default,{src:t.src,alt:t.title,fill:!0,sizes:"(max-width: 768px) 100vw, 60vw",priority:!0,style:{objectFit:"contain",maxHeight:"100%"}})})}),(0,n.jsxs)("div",{className:u().detailsSection,children:[(0,n.jsx)("h1",{className:u().title,children:t.title}),(0,n.jsx)("div",{className:u().tags,children:t.tags.map(e=>(0,n.jsx)("span",{className:u().tag,children:e},e))}),(0,n.jsx)("p",{className:u().description,children:t.description}),(0,n.jsxs)("div",{className:u().sizeSection,children:[(0,n.jsx)("h2",{children:"Available Sizes"}),(0,n.jsx)("div",{className:u().sizeOptions,children:t.sizes.map(e=>(0,n.jsxs)("div",{className:"".concat(u().sizeOption," ").concat(i===e?u().selected:""),onClick:()=>s(e),children:[(0,n.jsx)("span",{className:u().sizeLabel,children:e.size}),(0,n.jsxs)("span",{className:u().sizePrice,children:["$",e.price]}),(0,n.jsxs)("span",{className:u().sizeDimensions,children:[e.widthCm.toFixed(1)," \xd7 ",e.heightCm.toFixed(1)," cm"]})]},e.size))})]}),(0,n.jsxs)("div",{className:u().actionSection,children:[l&&(0,n.jsx)("button",{className:u().arButton,disabled:!i||c,onClick:()=>{i&&m(!0)},children:c?"AR Active":"View in Your Space"}),(0,n.jsxs)("div",{className:u().contactInfo,children:[(0,n.jsxs)("p",{children:["To purchase this print, please email",(0,n.jsx)("a",{href:"mailto:contact@example.com",children:" contact@example.com"})]}),(0,n.jsx)("p",{className:u().printDetails,children:"Limited edition fine art prints. Archival pigment ink on museum-quality paper. Signed and numbered with certificate of authenticity."})]})]})]}),c&&i&&(0,n.jsx)(d,{item:t,size:i,onEnd:()=>{m(!1)}})]})}},3727:e=>{e.exports={arContainer:"ARViewer_arContainer__5CK9h",arOverlay:"ARViewer_arOverlay__8NHNz",arControls:"ARViewer_arControls__sM974",closeButton:"ARViewer_closeButton__Ee9nt",instructions:"ARViewer_instructions__dIuF0"}},9296:e=>{e.exports={container:"PrintDetail_container__EdP5v",imageSection:"PrintDetail_imageSection__Av6HD",mainImage:"PrintDetail_mainImage__KoMVe",detailsSection:"PrintDetail_detailsSection__ExJfj",title:"PrintDetail_title__NMcJX",tags:"PrintDetail_tags__8E3n4",tag:"PrintDetail_tag__PSkNL",description:"PrintDetail_description__KQ3LF",sizeSection:"PrintDetail_sizeSection__fSAHg",sizeOptions:"PrintDetail_sizeOptions__W_R0k",sizeOption:"PrintDetail_sizeOption__n10Hh",selected:"PrintDetail_selected__McHwP",sizeLabel:"PrintDetail_sizeLabel__on26M",sizePrice:"PrintDetail_sizePrice__JCbGq",sizeDimensions:"PrintDetail_sizeDimensions__0UlDa",actionSection:"PrintDetail_actionSection__CjBgb",arButton:"PrintDetail_arButton__vb7C6",contactInfo:"PrintDetail_contactInfo__3iFFz",printDetails:"PrintDetail_printDetails__HytGo"}}},e=>{var t=t=>e(e.s=t);e.O(0,[898,367,831,874,766,441,684,358],()=>t(210)),_N_E=e.O()}]);