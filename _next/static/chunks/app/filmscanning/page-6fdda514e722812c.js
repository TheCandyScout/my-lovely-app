(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[690],{435:(e,t,i)=>{Promise.resolve().then(i.bind(i,1612))},1612:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});var n=i(5155),r=i(2115),l=i(7579),o=i(495),s=i(5964),a=i.n(s);let d=e=>{let[t,i]=(0,r.useState)(null),[n,l]=(0,r.useState)(!0),[o,s]=(0,r.useState)(null),[a,d]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!e){l(!1),s("No image URL provided");return}let t=new window.Image;return t.crossOrigin="anonymous",t.onload=()=>{i(t),d({width:t.naturalWidth||600,height:t.naturalHeight||400}),l(!1)},t.onerror=e=>{console.error("Image load error:",e),s("Failed to load image"),l(!1)},t.src=e,()=>{t.onload=null,t.onerror=null}},[e]),{image:t,dimensions:a,loading:n,error:o}},h=(e,t,i,n,r,l)=>{if(!e)return null;let o=l||.5,s=(null==n?void 0:n.width)||400,a=(null==n?void 0:n.height)||300,d=(null==r?void 0:r.width)||400,h=(null==r?void 0:r.height)||400,c=t?t.width:e.width,g=t?t.height:e.height,u=i.x/(s/c),m=i.y/(a/g),f=d/o,x=h/o,p=Math.max(0,Math.min(u-f/2,c-f)),w=Math.max(0,Math.min(m-x/2,g-x)),y=p,v=w,j=o,b=o;if(t&&e!==t){let t=e.width/c,i=e.height/g;y=p*t,v=w*i,j=o/t,b=o/i}return{x:y,y:v,scaleX:j,scaleY:b,sourceWidth:f,sourceHeight:x,centerX:u,centerY:m}},c=r.memo(e=>{let{image:t,params:i,width:r,height:o}=e;return(0,n.jsx)(l.BI,{width:r,height:o,style:{width:"100%",height:"100%",display:"block"},children:(0,n.jsx)(l.Wd,{children:(0,n.jsx)(l.rw,{x:0,y:0,width:r,height:o,fillPatternImage:t,fillPatternScale:{x:i.scaleX,y:i.scaleY},fillPatternOffset:{x:i.x,y:i.y}})})})},(e,t)=>e.image===t.image&&e.width===t.width&&e.height===t.height&&e.params.x===t.params.x&&e.params.y===t.params.y&&e.params.scaleX===t.params.scaleX&&e.params.scaleY===t.params.scaleY);c.displayName="MagnifiedViewContent";let g=e=>{let{image:t,referenceImage:i,magnifierPosition:l,stageDimensions:o,magDimensions:s,zoomScale:a,loading:d}=e,g=(0,r.useRef)(null),u=(0,r.useMemo)(()=>t?h(t,i,l,o,s||{width:400,height:400},a||.5):null,[t,i,l,o,s,a]);if((0,r.useEffect)(()=>{let e=g.current;return()=>{e&&e.destroyChildren&&(e.destroyChildren(),e.destroy())}},[]),d||!t||!u)return(0,n.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5",borderRadius:"8px"},children:(0,n.jsx)("div",{className:"loader",children:"Loading..."})});let m=(null==s?void 0:s.width)||400,f=(null==s?void 0:s.height)||400;return(0,n.jsx)(c,{image:t,params:u,width:m,height:f})};g.displayName="MagnifiedView";let u=r.memo(e=>{let{image:t,loading:i,stageDimensions:r,showRectangle:o,magnifierPosition:s,lensSize:a,onMouseMove:d,onTouchMove:h,onClick:c}=e;return i||!t?(0,n.jsx)("div",{style:{width:"100%",paddingBottom:"135.333%",position:"relative",border:"1px solid #ccc",borderRadius:"8px",backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("div",{className:"loader",children:"Loading..."})}):(0,n.jsx)("div",{style:{width:"100%",paddingBottom:"".concat(r.height/r.width*100,"%"),position:"relative",border:"1px solid #ccc",borderRadius:"8px",overflow:"hidden"},children:(0,n.jsx)(l.BI,{width:r.width,height:r.height,onClick:c,onTouchStart:c,onMouseMove:d,onTouchMove:h,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"8px"},children:(0,n.jsxs)(l.Wd,{children:[(0,n.jsx)(l._V,{image:t,x:0,y:0,width:r.width,height:r.height}),o&&(0,n.jsx)(l.rw,{x:s.x-a.width/2,y:s.y-a.height/2,width:a.width,height:a.height,stroke:"red",strokeWidth:2})]})})})});function m(){let e="/my-lovely-app/images/source.jpg",t="/my-lovely-app/images/source-1.png",{image:i,dimensions:l,loading:s,error:h}=d(e),{image:c,loading:m,error:f}=d(t),[x,p]=(0,r.useState)({x:0,y:0}),[w,y]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[b,S]=(0,r.useState)({width:400,height:300}),[k]=(0,r.useState)({width:400,height:400}),[C]=(0,r.useState)(400),[E]=(0,r.useState)(.5),M=(0,r.useRef)(null),R=(0,r.useRef)(null),I=(0,r.useRef)(null),N=(0,r.useRef)(null),P=(0,r.useRef)(null),z=(0,r.useRef)(null);(0,r.useEffect)(()=>{i&&!s&&p({x:b.width/2,y:b.height/2})},[i,s,b.width,b.height]);let T=(0,r.useCallback)(()=>{if(!M.current||!l)return;let e=M.current.offsetWidth||400,t=l.width||600,i=Math.floor(e*(l.height||400)/t)||300;S({width:e,height:i})},[l]);(0,r.useEffect)(()=>{if(i&&!s&&l&&M.current){let e=a()(T,150),t=M.current,i=new ResizeObserver(e);return z.current=i,i.observe(t),T(),()=>{i&&i.disconnect()}}},[i,s,l,T]);let W=(0,r.useCallback)(e=>{if(!w)return;let t=e.target.getStage(),i=null==t?void 0:t.getPointerPosition();i&&p(i)},[w]),D=(0,r.useCallback)(e=>{var t;if(!w)return;e.evt.preventDefault();let i=null==(t=e.target.getStage())?void 0:t.getPointerPosition();i&&p(i)},[w]),[B,O]=(0,r.useState)(!1),_=(0,r.useCallback)(e=>{let t=e.target.getStage(),i=null==t?void 0:t.getPointerPosition();i&&(e.evt instanceof MouseEvent?(y(e=>!e),j(!0),p(i)):e.evt instanceof TouchEvent&&(O(!0),j(!0),p(i)))},[]),L=(0,r.useCallback)(()=>{B&&(O(!1),y(e=>!e))},[B]);(0,r.useEffect)(()=>(document.addEventListener("touchend",L),()=>{document.removeEventListener("touchend",L)}),[L]);let V=(0,r.useMemo)(()=>{if(!i)return{width:50,height:50};let e=k.width/E,t=k.height/E,n=b.width/i.width,r=b.height/i.height;return{width:isNaN(e*n)?50:e*n,height:isNaN(t*r)?50:t*r}},[i,k,E,b]),X={flex:"1 1 400px",maxWidth:"400px",height:"400px",border:"1px solid #ccc",borderRadius:"8px",overflow:"hidden"};return(0,r.useEffect)(()=>{h&&console.error("Error loading image 1:",h),f&&console.error("Error loading image 2:",f)},[h,f]),(0,r.useEffect)(()=>()=>{z.current&&z.current.disconnect()},[]),(0,r.useEffect)(()=>{[e,t].forEach(e=>{new Image().src=e})},[e,t]),(0,n.jsxs)("article",{style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem",lineHeight:"1.6"},children:[(0,n.jsxs)("header",{style:{marginBottom:"2rem"},children:[(0,n.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"1rem"},children:"Comparing Cropped Image Quality"}),(0,n.jsx)("p",{style:{fontSize:"1rem",color:"#444"},children:"Tap or click on the image to see the magnified view."})]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"2rem",justifyContent:"center",alignItems:"flex-start"},children:[(0,n.jsxs)("div",{ref:M,style:{position:"relative",width:"100%",maxWidth:"600px",textAlign:"center"},children:[(0,n.jsx)(u,{image:i,loading:s,stageDimensions:b,showRectangle:v,magnifierPosition:x,lensSize:V,onMouseMove:W,onTouchMove:D,onClick:_}),(0,n.jsx)("p",{style:{fontSize:"0.9rem",color:"#666",marginTop:"0.5rem"},children:"Tap or click on the image to see the magnified view."})]}),(0,n.jsx)("div",{ref:I,style:{...X,display:w?"block":"none"},children:(0,n.jsx)(g,{image:i,loading:s,referenceImage:i,magnifierPosition:x,stageDimensions:b,magDimensions:k,zoomScale:E})}),(0,n.jsxs)("div",{ref:R,style:{...X,height:"".concat(C,"px"),display:w?"none":"block"},children:[i&&c&&!s&&!m?(0,n.jsx)(o.EW,{position:50,style:{width:"100%",height:"100%",borderRadius:"8px"},itemOne:(0,n.jsx)("div",{style:{width:"100%",height:"100%"},ref:N,children:(0,n.jsx)(g,{image:i,loading:s,referenceImage:i,magnifierPosition:x,stageDimensions:b,magDimensions:k,zoomScale:E})}),itemTwo:(0,n.jsx)("div",{style:{width:"100%",height:"100%"},ref:P,children:(0,n.jsx)(g,{image:c,loading:m,referenceImage:i,magnifierPosition:x,stageDimensions:b,magDimensions:k,zoomScale:E})})}):(0,n.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5"},children:(0,n.jsx)("div",{className:"loader",children:"Loading..."})}),(0,n.jsx)("p",{style:{fontSize:"0.9rem",color:"#666",marginTop:"0.5rem",textAlign:"center"},children:"Slide to compare between two different magnifications."})]})]}),(0,n.jsxs)("section",{style:{marginTop:"2rem"},children:[(0,n.jsx)("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:"Observations"}),(0,n.jsx)("p",{style:{fontSize:"1rem",color:"#333"},children:"The magnified view allows detailed inspection of images by tapping or clicking on them."})]})]})}u.displayName="MainImageView"}},e=>{var t=t=>e(e.s=t);e.O(0,[413,218,441,684,358],()=>t(435)),_N_E=e.O()}]);