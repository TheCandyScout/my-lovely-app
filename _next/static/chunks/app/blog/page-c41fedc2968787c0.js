(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{2068:(e,t,n)=>{Promise.resolve().then(n.bind(n,4269))},4269:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var i=n(5155),r=n(2115),a=n(6766),o=n(3264),l=n(7431);function s(){let[e,t]=(0,r.useState)(null),[n,s]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[f,g]=(0,r.useState)(1200),w=(0,r.useRef)(null),x=(0,r.useRef)(null),y=(0,r.useRef)(null),b=(0,r.useRef)(null);(0,r.useEffect)(()=>()=>v(),[]),(0,r.useEffect)(()=>{let e=()=>g(window.innerWidth);return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{var e;null==(e=navigator.xr)||e.isSessionSupported("immersive-ar").then(e=>m(e)).catch(()=>m(!1))},[]);let v=(0,r.useCallback)(()=>{var e;y.current&&(y.current.end(),y.current=null),null!==b.current&&(cancelAnimationFrame(b.current),b.current=null),(null==(e=x.current)?void 0:e.parentElement)&&(x.current.parentElement.removeChild(x.current),x.current=null),p(!1)},[]);async function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;return new Promise((n,i)=>{let r=new window.Image;r.crossOrigin="anonymous",r.onload=()=>{let e=Math.min(t/r.naturalWidth,t/r.naturalHeight,1),i=Math.floor(r.naturalWidth*e),a=Math.floor(r.naturalHeight*e),l=document.createElement("canvas");l.width=i,l.height=a,l.getContext("2d").drawImage(r,0,0,i,a);let s=new o.gPd(l);s.flipY=!1,s.colorSpace=o.er$,s.needsUpdate=!0,s.generateMipmaps=!0,s.minFilter=o.$_I,n(s)},r.onerror=i,r.src=e})}async function C(e,t){if(!u)return;v(),(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(e=>e.stop());let n=await navigator.xr.requestSession("immersive-ar",{optionalFeatures:["dom-overlay"],domOverlay:{root:w.current}});y.current=n,p(!0),n.addEventListener("end",v);let i=document.createElement("canvas");Object.assign(i.style,{position:"fixed",top:0,left:0,width:"100%",height:"100%",touchAction:"none",cursor:"grab"}),document.body.appendChild(i),x.current=i;let r=i.getContext("webgl2",{xrCompatible:!0,alpha:!0});await r.makeXRCompatible(),n.updateRenderState({baseLayer:new XRWebGLLayer(n,r)});let a=new l.JeP({canvas:i,context:r,alpha:!0});a.setSize(window.innerWidth,window.innerHeight),a.xr.enabled=!0,a.xr.setSession(n),a.xr.setReferenceSpaceType("local");let s=new o.Z58;s.add(new o.dth(0xffffff,4473924,1));let d=new o.ZyN(0xffffff,1.2);d.position.set(0,5,0),s.add(d);let c=new o.ubm(70,window.innerWidth/window.innerHeight,.01,20),m=await n.requestReferenceSpace("local"),h=.01*t.widthCm,f=.01*t.heightCm,g=await j(e.src,256),b=g.image,C=b.width/b.height,S=h,k=f;C>h/f?k=h/C:S=f*C;let z=new o.YJl;z.visible=!1,s.add(z);let E=new o.V9B({map:g,side:o.$EB,depthWrite:!0}),F=new o.eaF(new o.bdM(S,k),E);z.add(F),j(e.src,Math.max(2048,1e3*S,1e3*k)).then(e=>{E.map=e,E.needsUpdate=!0}).catch(e=>console.warn("hi-res load failed:",e));let R=null,P=null;n.addEventListener("select",()=>{R||function(){if(!P)return;let e=P.views[0],t=new o.kn4().fromArray(e.transform.matrix),n=new o.Pq0,i=new o.PTz;t.decompose(n,i,new o.Pq0);let r=new o.Pq0(0,0,-1).applyQuaternion(i).setY(0).normalize(),a=n.clone().add(r.multiplyScalar(3*.0254)),l=new o.kn4().lookAt(a,n,new o.Pq0(0,1,0)),d=new o.PTz().setFromRotationMatrix(l);d.multiply(new o.PTz().setFromAxisAngle(new o.Pq0(0,0,1),Math.PI));let c=4/3*S,u=4/3*k,m=new o.bdM(c,u),h=new o.V9B({color:0xdddddd,side:o.$EB});(R=new o.eaF(m,h)).position.copy(a),R.quaternion.copy(d),z.position.set(0,0,0),z.quaternion.identity(),R.add(z),z.visible=!0,s.add(R),F.position.z=-.001}()}),n.requestAnimationFrame(function e(t,i){n.requestAnimationFrame(e);let o=n.renderState.baseLayer;r.bindFramebuffer(r.FRAMEBUFFER,o.framebuffer),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);let l=i.getViewerPose(m);if(!l)return;P=l;let d=l.views[0],u=o.getViewport(d);a.setViewport(u.x,u.y,u.width,u.height),c.matrix.fromArray(d.transform.matrix),c.matrix.decompose(c.position,c.quaternion,c.scale),c.projectionMatrix.fromArray(d.projectionMatrix),c.updateMatrixWorld(!0),a.render(s,c)}),n.addEventListener("end",()=>{i.remove()})}function S(){t(null),v()}return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{style:{maxWidth:1400,margin:"0 auto",padding:"3rem 2rem",background:"#faf9f5",fontFamily:"'Playfair Display', serif"},children:[(0,i.jsx)("h1",{style:{textAlign:"center",fontWeight:300,marginBottom:"2rem",fontSize:"3rem"},children:"Print Collection"}),(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"2.5rem",alignItems:"start"},children:[{id:1,title:"Mountain Sunset",src:"/my-lovely-app/images/source.jpg",description:"35mm film scan of mountain landscape at sunset. Captured on Kodak Portra 400 with a Nikon F3.",sizes:[{size:'8\xd710"',price:45,widthCm:25.4,heightCm:20.32},{size:'11\xd714"',price:75,widthCm:35.56,heightCm:27.94},{size:'16\xd720"',price:120,widthCm:50.8,heightCm:40.64}],tags:["landscape","35mm","color"]}].map(e=>(0,i.jsxs)("figure",{onClick:()=>{t(e),s(!1),c(null)},style:{cursor:"pointer",overflow:"hidden",borderRadius:4,background:"white",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseEnter:e=>Object.assign(e.currentTarget.style,{transform:"translateY(-4px)",boxShadow:"0 8px 16px rgba(0,0,0,0.12)"}),onMouseLeave:e=>Object.assign(e.currentTarget.style,{transform:"none",boxShadow:"0 2px 6px rgba(0,0,0,0.08)"}),children:[(0,i.jsx)("div",{style:{width:"100%",gridAutoRows:"300px",display:"flex",alignItems:"center",justifyContent:"center",background:"#f5f3ee"},children:(0,i.jsx)(a.default,{src:e.src,alt:e.title,width:400,height:300,style:{height:300,width:"auto",objectFit:"contain"}})}),(0,i.jsxs)("figcaption",{style:{padding:"1rem 1.2rem"},children:[(0,i.jsx)("h3",{style:{margin:0,fontSize:"1.1rem"},children:e.title}),(0,i.jsx)("div",{style:{marginTop:"0.5rem",color:"#777",fontSize:"0.9rem"},children:e.tags.join(" • ")})]})]},e.id))}),e&&(0,i.jsx)("div",{onClick:S,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,i.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{background:"white",borderRadius:8,display:f>768?"flex":"block",width:"90%",maxWidth:1200,maxHeight:"90vh",overflow:"hidden",fontFamily:"'Helvetica Neue', sans-serif"},children:[(0,i.jsx)("button",{onClick:S,style:{position:"absolute",top:10,right:20,fontSize:32,background:"transparent",border:"none",color:"#333",cursor:"pointer",zIndex:1},children:"\xd7"}),(0,i.jsx)("div",{style:{flex:3,position:"relative",background:"#f5f3ee",height:f>768?"80vh":240},children:(0,i.jsx)(a.default,{src:e.src,alt:e.title,fill:!0,style:{objectFit:"contain"}})}),(0,i.jsxs)("div",{style:{flex:1,padding:"2rem",overflowY:"auto",borderLeft:f>768?"1px solid #eee":"none"},children:[(0,i.jsx)("h2",{style:{marginTop:0,fontFamily:"'Playfair Display', serif"},children:e.title}),(0,i.jsx)("button",{onClick:function(){s(e=>!e)},style:{margin:"1rem 0",background:"#333",color:"white",border:"none",padding:"0.6rem 1.2rem",cursor:"pointer",borderRadius:4},children:n?"Hide Details":"Show Details"}),n&&(0,i.jsx)("p",{style:{lineHeight:1.5},children:e.description}),(0,i.jsx)("h3",{children:"Available Sizes"}),(0,i.jsx)("ul",{style:{listStyle:"none",padding:0},children:e.sizes.map(t=>(0,i.jsxs)("li",{style:{marginBottom:"1rem"},children:[(0,i.jsxs)("label",{style:{cursor:"pointer",fontSize:"1rem"},children:[(0,i.jsx)("input",{type:"radio",name:"size",checked:d===t,onChange:()=>{c(t)}})," ",t.size," — $",t.price]}),u&&(0,i.jsx)("button",{onClick:()=>C(e,t),disabled:h,style:{marginLeft:8,background:h?"#777":"#333",color:"white",border:"none",padding:"0.3rem 0.8rem",cursor:h?"default":"pointer",borderRadius:4},children:h?"AR Active":"View in Your Space"})]},t.size))})]})]})}),(0,i.jsx)("div",{ref:w,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:1100}})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[367,212,766,441,684,358],()=>t(2068)),_N_E=e.O()}]);